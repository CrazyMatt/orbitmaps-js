<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Preview of orbits.lib.js</title>
        <style>
            html, body {
                border: 0;
                padding: 0;
                margin: 0;
                width: 100%;
                height: 100%;
            }
        </style>
    </head>
    <body>
        <div id="map" style="width: 100%; height: 100%"></div>
        <script src="http://maps.google.com/maps/api/js?v=3.10&sensor=false&language=en_us&key=AIzaSyCOqkcNey4CCyG4X0X5qxHAhCgD8g5DwXg" type="text/javascript"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="orbits.js" type="text/javascript"></script>
        <script type="text/javascript">

var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 2,
    center: new google.maps.LatLng(0,0),
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    keyboardShortcuts: false,
    streetViewControl: false,
    rotateControl: false,
    panControl: false,
    scaleControl: false,
    zoomControl: true,
    zoomControlOptions: {
        style: google.maps.ZoomControlStyle.DEFAULT
    },
    scrollwheel: true
});

var stations;
var sats = [];

$.get("stations.txt", function(data) {
    stations = orbits.parseTLE(data);
    //console.log(stations);

    var i = 0;
    for(;i < stations.length; i++) {
        var name = stations[i].name;
        var marker = null;
        var poly = null;

        if(name == "ISS (ZARYA)") {
            marker = new google.maps.Marker({
                icon: {
                    url: "img/iss.png",
                    size: new google.maps.Size(65,50),
                    scaledSize: new google.maps.Size(65,50),
                    anchor: new google.maps.Point(25,30),
                },
                zIndex: 100,
            });
            poly = new google.maps.Polyline({
                strokeWeight: 2,
                strokeColor: "blue",
                strokeOpacity: 0.6
            });
        }
        else if(name == "LITUANICASAT-1") {
            marker = new google.maps.Marker({
                icon: {
                    url: "img/LY5N.png",
                    size: new google.maps.Size(50,50),
                    scaledSize: new google.maps.Size(50,50),
                    anchor: new google.maps.Point(25,25),
                },
                zIndex: 100,
            });
            poly = new google.maps.Polyline({
                strokeWeight: 2,
                strokeColor: "red",
                strokeOpacity: 0.6
            });
        }
        else if(name == "TIANGONG 1") {
            marker = new google.maps.Marker({
                icon: {
                    url: "img/TIANGONG1.png",
                    size: new google.maps.Size(70,40),
                    scaledSize: new google.maps.Size(70,40),
                    anchor: new google.maps.Point(25,10),
                },
                zIndex: 100,
            });
            poly = new google.maps.Polyline({
                strokeWeight: 2,
                strokeColor: "#c700e6",
                strokeOpacity: 0.6
            });
        }
        else if(name == "SKYCUBE") {
            marker = new google.maps.Marker({
                icon: {
                    url: "img/skycube.png",
                    size: new google.maps.Size(35,35),
                    scaledSize: new google.maps.Size(35,35),
                    anchor: new google.maps.Point(16,16),
                },
                zIndex: 100,
            });
            poly = new google.maps.Polyline({
                strokeWeight: 2,
                strokeColor: "green",
                strokeOpacity: 0.6
            });
        }
        else {
            marker = new google.maps.Marker({
                icon: {
                    url: "img/other.png",
                    size: new google.maps.Size(20,20),
                    scaledSize: new google.maps.Size(20,20),
                    anchor: new google.maps.Point(10,10),
                },
                zIndex: 1,
            });
        }

        // hide orbit paths for debries
        var length = (name.indexOf("FLOCK") == -1 ) ? 3 : 0;

        sats.push(new orbits.Satellite({
            map:map,
            tle: stations[i],
            pathLength: length,
            marker: marker,
            polyline: poly
        }));
    }

    setInterval(function() {
        var i = 0;
        for(;i < sats.length; i++) sats[i].refresh();
    }, 2000);
});

        </script>
    </body>
</html>
